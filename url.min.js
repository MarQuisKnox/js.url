/* JavaScript/NodeJS URL v1.2.4 - https://github.com/yeikos/js.url */
;(function(e,t){function i(e){return typeof e==="string"||typeof e==="number"?""+e:""}function s(e,t,r){var i=arguments.length-1,s=n.unparam(this.attr(e).substr(1));if(!i){return s}else if(i===1){if(t&&typeof t==="object"){this.attr(e,t)}else{return s[t]}}else if(i===2){if(r===null){delete s[t]}else{s[t]=r}this.attr(e,s)}return this}function o(e,t){var r=n.unbuild(this._attributes,this.location instanceof n?this.location._attributes:false),s={},o=false,u=0,a=e.length,f;t=i(t).toLowerCase();if(t==="hostname"){delete r.host;delete r.port}for(u;u<a;++u){f=e[u];if(!o){if(f in r)s[f]=r[f];if(f===t)o=true}}return n.build(s)}function u(e,t){var r=e==="hash"?"#":"?";if(t&&typeof t==="object"){t=n.param(t)}else{t=(t=i(t))&&t.substr(0,1)===r?t.substr(1):t}try{t=encodeURI(decodeURI(t))}catch(s){t=""}return t?r+decodeURI(t):""}function a(e){return typeof HTMLElement==="function"?e instanceof HTMLElement:e&&typeof e==="object"&&e.nodeType===1&&typeof e.nodeName==="string"}var n=function(t,r){if(!(this instanceof n))return n.instance(arguments);this._attributes={};if(!this.isLocation)this.location=n.instance(arguments.length>1?[r]:[],function(){this.isLocation=true});if(arguments.length)this.href(t);return this},r="URL";n.prototype={constructor:n,_attributes:null,href:function(e){var t;if(!arguments.length){return n.build(this._attributes,this.location)}else if(e===null){this._attributes={}}else if((t=typeof e)==="string"||e&&t==="object"){this._attributes=n.unbuild(e,this.location)}return this},attr:function(e,t){var r=arguments.length;if(!r){var s={};for(r in this._attributes)s[r]=i(this._attributes[r]);return s}else if(r===1){if((r=typeof e)==="string"){return i(this._attributes[e.toLowerCase()])}else if(e&&(r=typeof e)==="object"){for(r in e)this.attr(r,e[(r||"").toLowerCase()])}}else if(r===2&&typeof e==="string"&&(r=e.toLowerCase())){if(function(t){while(t--)if(n.attributes[t]===e)return true}(n.attributes.length)){if(e==="host"||e==="hostname"){r=n.normalize.host(i(t)+(e==="hostname"&&this._attributes.port?":"+this._attributes.port:""));this._attributes.host=r.hostname+(r.port?":"+r.port:"");this._attributes.hostname=r.hostname;this._attributes.port=r.port}else{this._attributes[e]=n.normalize[e](t)}}}return this},search:function(){return s.apply(this,["search"].concat([].slice.apply(arguments)))},hash:function(){return s.apply(this,["hash"].concat([].slice.apply(arguments)))},isExternal:function(){var e=n.unbuild(this._attributes,this.location);if(!(this.location instanceof n))return e.protocol||e.host?true:false;return this.location.attr("protocol")!==e.protocol||this.location.attr("host")!==e.host},select:function(){return o.apply(this,[arguments])},unselect:function(){var e=n.attributes.slice(0),t=[].slice.apply(arguments),r={},s=t.length,u=e.length;while(s--)r[i(t[s]).toLowerCase()]=1;if(r.hostname||r.port){r.host=1}else if(r.host){r.hostname=1;r.port=1}while(u--)if(r[e[u]])e.splice(u,1);return o.apply(this,[e])},from:function(e){return o.apply(this,[n.attributes.slice(0).reverse(),e])},to:function(e){return o.apply(this,[n.attributes,e])}};n.attributes=["protocol","auth","host","hostname","port","pathname","search","hash"];n.normalize={regexp_split:/^(?:(?:(.+:)?\/\/)(?:(?:(.+)@)?([^\/:]+)(?::([^\/]+))?)?)?(?:(\/?[^?#]*)?(\?[^#]*)?(#.*)?)?/,regex_rfc3986_schema:/^[a-z][\w+\-.]*$/i,regex_rfc3986_userinfo:/^(?:[\w\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*$/,regex_rfc3986_host:/^(?:\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\.[\w\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[\w\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)$/,regex_rfc3986_port:/^\d+$/,protocol:function(e){var t=(e=i(e)).length;e=e.substr(t-1,1)===":"?e.substr(0,e.length-1):e;return n.normalize.regex_rfc3986_schema.test(e=e.toLowerCase())?e+":":""},auth:function(e){return n.normalize.regex_rfc3986_userinfo.test(e=i(e))?e:""},host:function(e){var t="",r;e=i(e).split(":");if(e.length>1){t=n.normalize.port(e.pop());if(!(r=n.normalize.hostname(e.join(":"))))t=""}else{r=n.normalize.hostname(e.shift())}return{hostname:r,port:t}},hostname:function(e){return n.normalize.regex_rfc3986_host.test(e=i(e).toLowerCase())?e:""},port:function(e){return n.normalize.regex_rfc3986_port.test(e=i(e))?e:""},pathname:function(e){try{e=encodeURI(decodeURI(i(e)))}catch(t){e=""}var n=e.split("/"),r=n.length,s=[],o=0;while(r--){if(n[r]===".."){o++}else if(n[r]!=="."){if(!o){s.unshift(n[r])}else{o--}}}return(s=s.join("/")).substr(0,1)!=="/"&&e.substr(0,1)==="/"?"/"+s:s},search:function(e){return u.apply(this,["search",e])},hash:function(e){return u.apply(this,["hash",e])}};n.instance=function(e,t){var r=function(t){if(typeof t==="function")t.call(this)};e=typeof e==="object"&&e?[].slice.call(e,0):e;return(r.prototype=n.prototype).constructor.apply(new r(t),e instanceof Array?e:[])};n.getElementURL=function(e){if(!a(e))return"";var t=typeof HTMLElement==="function"?(t=e instanceof HTMLFormElement?"action":e instanceof HTMLAnchorElement||e instanceof HTMLBaseElement||e instanceof HTMLLinkElement?"href":e instanceof HTMLImageElement||e instanceof HTMLScriptElement||e instanceof HTMLIFrameElement?"src":0)?t:"":(t=(t=e.nodeName.toLowerCase())==="form"?"action":t==="a"||t==="base"||t==="link"?"href":t==="img"||t==="script"||t==="iframe"?"src":0)?t:"";return(typeof e.getAttribute==="function"||typeof e.getAttribute==="object"&&e.getAttribute)&&(t=e.getAttribute(t))?t:""};n.build=function(e,t){var n=this.unbuild(e,t);return(n.protocol?n.protocol+"//":n.host?"//":"")+(n.auth&&n.host?n.auth+"@":"")+n.host+(!n.pathname&&(n.protocol||n.host)&&(n.search||n.hash)?"/":"")+(n.pathname+n.search+n.hash)};n.unbuild=function(e,t){var r=n.normalize,i,s,o;t=t instanceof n?t.attr():t&&((o=typeof t)==="string"||o==="object")?n.unbuild(t):false;if(a(e))e=n.getElementURL(e);if(typeof e==="string"){e=encodeURI(decodeURI(e));if(!(s=e.match(n.normalize.regexp_split)))s=[];i={protocol:r.protocol(s[1]),auth:r.auth(s[2]),hostname:r.hostname(s[3]),port:r.port(s[4]),pathname:r.pathname(s[5]),search:r.search(s[6]),hash:r.hash(s[7])}}else if(e instanceof n){i=e.attr()}else{if(!e||typeof e!=="object")e={};i={protocol:r.protocol(e.protocol),auth:r.auth(e.auth),pathname:r.pathname(e.pathname),search:r.search(e.search),hash:r.hash(e.hash)};if("host"in e){i.hostname=(o=r.host(e.host)).hostname;i.port=o.port}else if("hostname"in e){i.hostname=r.hostname(e.hostname);i.port=i.hostname?r.port(e.port):""}else{i.hostname="";i.port=""}}if(t){if("host"in t){i._hostname=(o=r.host(t.host)).hostname;i._port=o.port}else if("hostname"in t){i._hostname=r.hostname(t.hostname);i._port=i.hostname?r.port(t.port):""}if(!i.protocol){if("protocol"in t)i.protocol=r.protocol(t.protocol);if(!i.hostname){if("_hostname"in i)i.hostname=i._hostname;if(!i.port){if("_port"in i)i.port=i._port;if(!i.auth){if("auth"in t)i.auth=r.auth(t.auth);if(!i.pathname){if("pathname"in t)i.pathname=r.pathname(t.pathname);if(!i.search){if("search"in t)i.search=r.search(t.search);if(!i.hash&&"hash"in t)i.hash=r.search(t.hash)}}else if("pathname"in t&&i.pathname.substr(0,1)!=="/"){i.pathname=r.pathname(t.pathname).split("/").slice(0,-1).concat(i.pathname).join("/")}}}}}delete i._hostname;delete i._port}i.host=i.hostname+(i.port?":"+i.port:"");return i};n.param=function(e){var t=function(e,n){if(!e||typeof e!=="object")return"";var r=[],i=/%20/g,s=true,o,u,a;for(o in e){s=false;a=n?n+"["+encodeURIComponent(o)+"]":encodeURIComponent(o);r.push((u=e[o])&&typeof u==="object"?t(u,a):a.replace(i,"+")+((u=encodeURIComponent(typeof u==="string"||typeof u==="number"?u:"").replace(i,"+"))?"="+u:""))}if(s)r.push(n);return r.join("&")};return t(e)};n.unparam=function(e){if(typeof e!=="string")return{};try{e=decodeURI(e)}catch(t){return{}}var n,r,i,s,o,u,a,f,l,c,h=/^[1-9]d*/,p=/^[^\[]+/,d=/\[(.*?)\]/g,v=/\+/g,m={};for(n=0,r=(e=e.split(/&+/)).length;n<r;++n){if(!(i=e[n]))continue;a=(c=i.split("=")).shift();f=decodeURIComponent(c.join("=").replace(v," "));if(!(c=a.match(p)))continue;u=a;a=decodeURIComponent(c[0].replace(v," "));if(u=u.match(d)){if(!m[a])m[a]={};l=m[a];for(s=0,o=u.length;s<o;++s){if(!(i=(i=u[s]).substr(1,i.length-2))){i=-1;for(c in l)if(h.test(c)&&c>i)i=c;++i}i=decodeURIComponent((i+"").replace(v," "));if(s===o-1){l[i]=f}else{if(!l[i])l[i]={};l=l[i]}}}else{m[a]=f}}return m};return e?module.exports=n:window[r]=n})(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports);