/* JavaScript/NodeJS URL v1.2.2 - https://github.com/yeikos/js.url */
;(function(e,t){function i(e,t,r){var i=arguments.length-1,s=n.unparam(this.attr(e).substr(1));if(!i){return s}else if(i===1){if(t&&typeof t==="object"){this.attr(e,t)}else{return s[t]}}else if(i===2){if(r===null){delete s[t]}else{s[t]=r}this.attr(e,s)}return this}function s(e,t){var r=n.unbuild(this._attributes,this.location instanceof n?this.location._attributes:false),i={},s=false,o=0,u=e.length,a;t=n.toString(t).toLowerCase();if(t==="hostname"){delete r.host;delete r.port}for(o;o<u;++o){a=e[o];if(!s){if(a in r)i[a]=r[a];if(a===t)s=true}}return n.build(i)}function o(e,t){var r=e==="hash"?"#":"?";if(t&&typeof t==="object"){t=n.param(t)}else{t=(t=n.toString(t))&&t.substr(0,1)===r?t.substr(1):t}try{t=encodeURI(decodeURI(t))}catch(i){t=""}return t?r+decodeURI(t):""}function u(e){return typeof HTMLElement==="function"&&e instanceof HTMLElement}var n=function(t,r){if(!(this instanceof n))return n.instance(arguments);this._attributes={};if(!this.isLocation)this.location=n.instance(arguments.length>1?[r]:[],function(){this.isLocation=true});if(arguments.length)this.href(t);return this},r="URL";n.prototype={constructor:n,_attributes:null,href:function(e){var t;if(!arguments.length){return n.build(this._attributes,this.location instanceof n?this.location._attributes:false)}else if(e===null){this._attributes={}}else if((t=typeof e)==="string"||e&&t==="object"){this._attributes=n.unbuild(e,this.location instanceof n?this.location._attributes:false)}return this},attr:function(e,t){var r=arguments.length;if(!r){var i={};for(r in this._attributes)i[r]=n.toString(this._attributes[r]);return i}else if(r===1){if((r=typeof e)==="string"){return n.toString(this._attributes[e.toLowerCase()])}else if(e&&(r=typeof e)==="object"){for(r in e)this.attr(r,e[(r||"").toLowerCase()])}}else if(r===2&&typeof e==="string"&&(r=e.toLowerCase())){if(function(t){while(t--)if(n.attributes[t]===e)return true}(n.attributes.length)){if(e==="host"||e==="hostname"){r=n.normalize.host(n.toString(t)+(e==="hostname"&&this._attributes.port?":"+this._attributes.port:""));this._attributes.host=r.hostname+(r.port?":"+r.port:"");this._attributes.hostname=r.hostname;this._attributes.port=r.port}else{this._attributes[e]=n.normalize[e](t)}}}return this},search:function(){return i.apply(this,["search"].concat([].slice.apply(arguments)))},hash:function(){return i.apply(this,["hash"].concat([].slice.apply(arguments)))},isExternal:function(){var e=this.location instanceof n?this.location._attributes:false,t=n.unbuild(this._attributes,e);if(!e)return t.protocol||t.host?true:false;return this.location.attr("protocol")!==t.protocol||this.location.attr("host")!==t.host},select:function(){return s.apply(this,[arguments])},unselect:function(){var e=n.attributes.slice(0),t=[].slice.apply(arguments),r={},i=t.length,o=e.length;while(i--)r[n.toString(t[i]).toLowerCase()]=1;if(r.hostname||r.port){r.host=1}else if(r.host){r.hostname=1;r.port=1}while(o--)if(r[e[o]])e.splice(o,1);return s.apply(this,[e])},from:function(e){return s.apply(this,[n.attributes.slice(0).reverse(),e])},to:function(e){return s.apply(this,[n.attributes,e])}};n.attributes=["protocol","auth","host","hostname","port","pathname","search","hash"];n.normalize={regexp_split:/^(?:(?:(.+:)?\/\/)(?:(?:(.+)@)?([^\/:]+)(?::([^\/]+))?)?)?(?:(\/?[^?#]*)?(\?[^#]*)?(#.*)?)?/,regex_rfc3986_schema:/^[a-z][\w+\-.]*$/i,regex_rfc3986_userinfo:/^(?:[\w\-._~!$&'()*+,;=:]|%[0-9A-Fa-f]{2})*$/,regex_rfc3986_host:/^(?:\[(?:(?:(?:(?:[0-9A-Fa-f]{1,4}:){6}|::(?:[0-9A-Fa-f]{1,4}:){5}|(?:[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,1}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){3}|(?:(?:[0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})?::(?:[0-9A-Fa-f]{1,4}:){2}|(?:(?:[0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}:|(?:(?:[0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})?::)(?:[0-9A-Fa-f]{1,4}:[0-9A-Fa-f]{1,4}|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?))|(?:(?:[0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})?::[0-9A-Fa-f]{1,4}|(?:(?:[0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})?::)|[Vv][0-9A-Fa-f]+\.[\w\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)|(?:[\w\-._~!$&'()*+,;=]|%[0-9A-Fa-f]{2})*)$/,regex_rfc3986_port:/^\d+$/,protocol:function(e){e=(e=n.toString(e)).substr(-1)===":"?e.substr(0,e.length-1):e;return n.normalize.regex_rfc3986_schema.test(e=e.toLowerCase())?e+":":""},auth:function(e){return n.normalize.regex_rfc3986_userinfo.test(e=n.toString(e))?e:""},host:function(e){var t="",r;e=n.toString(e).split(":");if(e.length>1){t=n.normalize.port(e.pop());if(!(r=n.normalize.hostname(e.join(":"))))t=""}else{r=n.normalize.hostname(e.shift())}return{hostname:r,port:t}},hostname:function(e){return n.normalize.regex_rfc3986_host.test(e=n.toString(e).toLowerCase())?e:""},port:function(e){return n.normalize.regex_rfc3986_port.test(e=n.toString(e))?e:""},pathname:function(e){try{e=encodeURI(decodeURI(n.toString(e)))}catch(t){e=""}if(e&&e.substr(0,1)!=="/")e="/"+e;return e.replace(/[\/]{2,}/g,"/")},search:function(e){return o.apply(this,["search",e])},hash:function(e){return o.apply(this,["hash",e])}};n.instance=function(e,t){var r=function(t){if(typeof t==="function")t.call(this)};return(r.prototype=n.prototype).constructor.apply(new r(t),e)};n.toString=function(e){return typeof e==="string"||typeof e==="number"?""+e:""};n.getElementURL=function(e){var t;return u(e)&&(t=e instanceof HTMLFormElement?"action":e instanceof HTMLAnchorElement||e instanceof HTMLBaseElement||e instanceof HTMLLinkElement?"href":e instanceof HTMLImageElement||e instanceof HTMLScriptElement||e instanceof HTMLIFrameElement?"src":0)?e.getAttribute(t):""};n.build=function(e,t){var n=this.unbuild(e,t);return(n.protocol?n.protocol+"//":n.host?"//":"")+(n.auth&&n.host?n.auth+"@":"")+n.host+(!n.pathname&&(n.protocol||n.host)&&(n.search||n.hash)?"/":"")+(n.pathname+n.search+n.hash)};n.unbuild=function(e,t){var r=n.normalize,i,s,o;t=t&&((o=typeof t)==="string"||o==="object")?n.unbuild(t):false;if(u(e))e=n.getElementURL(e);if(typeof e==="string"){e=encodeURI(decodeURI(e));if(!(s=e.match(n.normalize.regexp_split)))s=[];i={protocol:r.protocol(s[1]),auth:r.auth(s[2]),hostname:r.hostname(s[3]),port:r.port(s[4]),search:r.search(s[6]),hash:r.hash(s[7]),pathname:n.toString(s[5])}}else{if(!e||typeof e!=="object")e={};i={protocol:r.protocol(e.protocol),auth:r.auth(e.auth),search:r.search(e.search),hash:r.hash(e.hash),pathname:n.toString(e.pathname)};if("host"in e){i.hostname=(o=r.host(e.host)).hostname;i.port=o.port}else if("hostname"in e){i.hostname=r.hostname(e.hostname);i.port=i.hostname?r.port(e.port):""}else{i.hostname="";i.port=""}}if(t){if("host"in t){i._hostname=(o=r.host(t.host)).hostname;i._port=o.port}else if("hostname"in t){i._hostname=r.hostname(t.hostname);i._port=i.hostname?r.port(t.port):""}if(!i.protocol){if("protocol"in t)i.protocol=r.protocol(t.protocol);if(!i.hostname){if("_hostname"in i)i.hostname=i._hostname;if(!i.port){if("_port"in i)i.port=i._port;if(!i.auth){if("auth"in t)i.auth=r.auth(t.auth);if(!i.pathname){if("pathname"in t)i.pathname=t.pathname;if(!i.search){if("search"in t)i.search=r.search(t.search);if(!i.hash&&"hash"in t)i.hash=r.search(t.hash)}}else{if("pathname"in t){o=n.toString(t.pathname);if(i.pathname.substr(0,1)!=="/"&&o.length>1&&o.substr(-1)==="/")i.pathname=o+i.pathname}}}}}}delete i._hostname;delete i._port}i.pathname=r.pathname(i.pathname);i.host=i.hostname+(i.port?":"+i.port:"");return i};n.param=function(e){var t=function(e,n){if(!e||typeof e!=="object")return"";var r=[],i=/%20/g,s=true,o,u,a;for(o in e){s=false;a=n?n+"["+encodeURIComponent(o)+"]":encodeURIComponent(o);r.push((u=e[o])&&typeof u==="object"?t(u,a):a.replace(i,"+")+((u=encodeURIComponent(typeof u==="string"||typeof u==="number"?u:"").replace(i,"+"))?"="+u:""))}if(s)r.push(n);return r.join("&")};return t(e)};n.unparam=function(e){if(typeof e!=="string")return{};var t,n,r,i,s,o,u,a,f,l,c=/^[1-9]d*/,h=/^[^\[]+/,p=/\[(.*?)\]/g,d=/\+/g,v={};for(t=0,n=(e=e.split(/&+/)).length;t<n;++t){if(!(r=e[t]))continue;u=(l=r.split("=")).shift();a=decodeURIComponent(l.join("=").replace(d," "));if(!(l=u.match(h)))continue;o=u;u=decodeURIComponent(l[0].replace(d," "));if(o=o.match(p)){if(!v[u])v[u]={};f=v[u];for(i=0,s=o.length;i<s;++i){if(!(r=(r=o[i]).substr(1,r.length-2))){r=-1;for(l in f)if(c.test(l)&&l>r)r=l;++r}r=decodeURIComponent((r+"").replace(d," "));if(i===s-1){f[r]=a}else{if(!f[r])f[r]={};f=f[r]}}}else{v[u]=a}}return v};return e?module.exports=n:window[r]=n})(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports);